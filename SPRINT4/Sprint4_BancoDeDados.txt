--Caio Ribeiro -- RM99759 -- 1TDSPY
--Eduardo Jablinski -- RM550975 -- 1TDSPY
--Gabriel Cunha -- RM98074 -- 1TDSPX
--Guilherme Riofrio -- RM550137 -- 1TDSPY
--Natalia Scigliano -- RM98430 -- 1TDSPX

--Aqui todas as tabelas estão sendo deletadas para não dar conflito com outros trabalhos;
--Todas as tabelas e tudo relacionado à elas estão sendo deletados primeiramente.
DROP TABLE TB_ACS_VEICULO CASCADE CONSTRAINTS;
DROP TABLE TB_ACS_MODELO CASCADE CONSTRAINTS;
DROP TABLE TB_ACS_USER CASCADE CONSTRAINTS;
DROP TABLE TB_ACS_MODELOAPOLICE CASCADE CONSTRAINTS;
DROP TABLE TB_ACS_APOLICE CASCADE CONSTRAINTS;
DROP TABLE TB_ACS_VEICULO_APOLICE CASCADE CONSTRAINTS;
DROP TABLE TB_ACS_PRESTADOR CASCADE CONSTRAINTS;
DROP TABLE TB_ACS_ORDEMSERVICO CASCADE CONSTRAINTS;
DROP TABLE TB_ACS_MODAL CASCADE CONSTRAINTS;
DROP TABLE TB_ACS_MODAL_PRESTADOR CASCADE CONSTRAINTS;

--Criando uma tabela com os dados do veículo e adicionando uma PK:
CREATE TABLE TB_ACS_VEICULO
    (
        ID_VEICULO INT NOT NULL,
        ANO_VEICULO INT,
        PESO_VEICULO FLOAT,
        TIPO_COMBUSTIVEL VARCHAR2(40),
        COR_VEICULO VARCHAR2(30)
    );
ALTER TABLE TB_ACS_VEICULO ADD CONSTRAINT TB_ACS_VEICULO_PK PRIMARY KEY (ID_VEICULO);

--Criando uma tabela com os dados do modelo do veículo e adicionando uma PK e uma FK:
CREATE TABLE TB_ACS_MODELO
    (
        ID_MODELO INT NOT NULL,
        ID_VEICULO INT NOT NULL,
        ALTURA_MODELO FLOAT,
        LARGURA_MODELO FLOAT,
        COMPRIMENTO_MODELO FLOAT,
        CATEGORIA_MODELO VARCHAR2(50),
        MONTADORA_MODELO VARCHAR2(30)
    );
ALTER TABLE TB_ACS_MODELO ADD CONSTRAINT TB_ACS_MODELO_PK PRIMARY KEY (ID_MODELO);
ALTER TABLE TB_ACS_MODELO 
    ADD CONSTRAINT TB_ACS_MODELO_ID_VEICULO_FK FOREIGN KEY (ID_VEICULO)
        REFERENCES TB_ACS_VEICULO(ID_VEICULO);

--Criando uma tabela com informações do usuário e adicionando uma PK:
CREATE TABLE TB_ACS_USER(
    ID_USER INT NOT NULL,
    NOME_USER VARCHAR2(80) NOT NULL,
    CPF_USER VARCHAR2(11) NOT NULL,
    ENDERECO_USER VARCHAR2(80) NOT NULL,
    EMAIL_USER VARCHAR2(50) NOT NULL,
    TELEFONE_USER VARCHAR2(15) NOT NULL
);
ALTER TABLE TB_ACS_USER ADD CONSTRAINT TB_ACS_USER_ID_USER PRIMARY KEY (ID_USER);

--Criando uma tabela com informações da apólice e adicionando uma PK:
CREATE TABLE TB_ACS_MODELOAPOLICE(
    ID_MODELOAPOLICE INT NOT NULL,
    TIPO_COBERTURA VARCHAR2(80),
    PERIODO_VIGENCIA DATE,
    EXCLUSOES_APOLICE VARCHAR2(100)
);
ALTER TABLE TB_ACS_MODELOAPOLICE ADD CONSTRAINT TB_ACS_MODELOAPOLICE_ID_MODELOAPOLICE PRIMARY KEY (ID_MODELOAPOLICE);

--Criando uma tabela para interligar o usuário com a apólice, contendo informações da cobertura do plano. Adicionando uma PK e uma FK:
CREATE TABLE TB_ACS_APOLICE(
    ID_APOLICE INT NOT NULL,
    ID_MODELOAPOLICE INT NOT NULL,
    ID_USER INT NOT NULL,
    NUMERO_APOLICE VARCHAR2(40) NOT NULL
);
ALTER TABLE TB_ACS_APOLICE ADD CONSTRAINT TB_ACS_APOLICE_ID_APOLICE PRIMARY KEY (ID_APOLICE);
ALTER TABLE TB_ACS_APOLICE
    ADD CONSTRAINT TB_ACS_APOLICE_ID_MODELOAPOLICE_FK FOREIGN KEY(ID_MODELOAPOLICE)
        REFERENCES TB_ACS_MODELOAPOLICE(ID_MODELOAPOLICE);
        
--Criando uma tabela para interligar dados do veículo com a apolice, contendo também informações sobre a condição do veículo (se tiveram alterações por exemplo);
--Contém duas FK
CREATE TABLE TB_ACS_VEICULO_APOLICE(
    ID_VEICULO INT NOT NULL,
    ID_APOLICE INT NOT NULL,
    PLACA_VEICULO VARCHAR2(7) NOT NULL,
    CONDICAO_VEICULO VARCHAR2(100)
);
ALTER TABLE TB_ACS_VEICULO_APOLICE
    ADD CONSTRAINT TB_ACS_VEICULO_APOLICE_ID_VEICULO_FK FOREIGN KEY(ID_VEICULO)
        REFERENCES TB_ACS_VEICULO(ID_VEICULO);
        
ALTER TABLE TB_ACS_VEICULO_APOLICE
    ADD CONSTRAINT TB_ACS_VEICULO_APOLICE_ID_APOLICE_FK FOREIGN KEY(ID_APOLICE)
        REFERENCES TB_ACS_APOLICE(ID_APOLICE);

--Criando a tabela com informações do prestador de serviços da Porto Seguro, com uma PK:
CREATE TABLE TB_ACS_PRESTADOR(
    ID_PRESTADOR INT NOT NULL,
    NOME_PRESTADOR VARCHAR2(50) NOT NULL,
    TELEFONE_PRESTADOR VARCHAR2(15) NOT NULL,
    ULTIMA_LOCALIZAO_PRESTADOR VARCHAR2(30)
);
ALTER TABLE TB_ACS_PRESTADOR ADD CONSTRAINT TB_ACS_PRESTADOR_ID_PRESTADOR_PK PRIMARY KEY(ID_PRESTADOR);

--Criando uma tabela com a ordem de serviço;
--Ela conterá uma PK e trará três FK, unindo informações do usuário, da apólice, do prestador de serviço e informações da abertura do chamado
CREATE TABLE TB_ACS_ORDEMSERVICO(
    ID_ORDEMSERVICO INT NOT NULL,
    ID_APOLICE INT NOT NULL,
    ID_PRESTADOR INT NOT NULL,
    ID_USER INT NOT NULL,
    DESCRICAO_ORDEMSERVICO VARCHAR2(100),
    DATAABERTURA_ORDEMSERVICO TIMESTAMP,
    DATAFECHAMENTO_ORDEMSERVICO TIMESTAMP,
    STATUS_ORDEMSERVICO VARCHAR2(50),
    LOCALIZACAO_ORDEMSERVICO VARCHAR2(100)
);
ALTER TABLE TB_ACS_ORDEMSERVICO ADD CONSTRAINT TB_ACS_ORDEMSERVICO_ID_ORDEMSERVICO_PK PRIMARY KEY(ID_ORDEMSERVICO);

ALTER TABLE TB_ACS_ORDEMSERVICO
    ADD CONSTRAINT TB_ACS_ORDEMSERVICO_ID_APOLICE_FK FOREIGN KEY(ID_APOLICE)
        REFERENCES TB_ACS_APOLICE(ID_APOLICE);

ALTER TABLE TB_ACS_ORDEMSERVICO
    ADD CONSTRAINT TB_ACS_ORDEMSERVICO_ID_PRESTADOR_FK FOREIGN KEY(ID_PRESTADOR)
        REFERENCES TB_ACS_PRESTADOR(ID_PRESTADOR);

ALTER TABLE TB_ACS_ORDEMSERVICO
    ADD CONSTRAINT TB_ACS_ORDEMSERVICO_ID_USER_FK FOREIGN KEY(ID_USER)
        REFERENCES TB_ACS_USER(ID_USER);

--Criando uma tabela para o tipo de guincho, com uma PK e informações do Guincho
CREATE TABLE TB_ACS_MODAL(
    ID_MODAL INT NOT NULL,
    TIPO_MODAL VARCHAR2(80),
    CAPACIDADE_MODAL VARCHAR2(30),
    CAPACIDADE_DE_INTERMODALIDADE VARCHAR2(80)
);
ALTER TABLE TB_ACS_MODAL ADD CONSTRAINT TB_ACS_MODAL_ID_MODAL_PK PRIMARY KEY(ID_MODAL);

--Criando uma tabela para interligar informações do prestador de serviço e do modal de atendimento, bem como a placa do veículo guincho;
--Ela contém duas FKs
CREATE TABLE TB_ACS_MODAL_PRESTADOR(
    ID_PRESTADOR INT NOT NULL,
    ID_MODAL INT NOT NULL,
    PLACA_MODAL_PRESTADOR VARCHAR2(7)
);
ALTER TABLE TB_ACS_MODAL_PRESTADOR 
    ADD CONSTRAINT TB_ACS_MODAL_PRESTADOR_ID_PRESTADOR_FK FOREIGN KEY(ID_PRESTADOR)
        REFERENCES TB_ACS_PRESTADOR(ID_PRESTADOR);
ALTER TABLE TB_ACS_MODAL_PRESTADOR
    ADD CONSTRAINT TB_ACS_MODAL_PRESTADOR_ID_MODAL_FK FOREIGN KEY(ID_MODAL)
        REFERENCES TB_ACS_MODAL(ID_MODAL);


INSERT INTO TB_ACS_MODAL (ID_MODAL, TIPO_MODAL, CAPACIDADE_MODAL, CAPACIDADE_DE_INTERMODALIDADE)
    VALUES(1, 'Guincho Plataforma', '+ 20 toneladas', 'V');
INSERT INTO TB_ACS_MODAL (ID_MODAL, TIPO_MODAL, CAPACIDADE_MODAL, CAPACIDADE_DE_INTERMODALIDADE)
    VALUES(2, 'Guincho Munck', '10 toneladas', 'F');
INSERT INTO TB_ACS_MODAL (ID_MODAL, TIPO_MODAL, CAPACIDADE_MODAL, CAPACIDADE_DE_INTERMODALIDADE)
    VALUES(3, 'Guincho Rotador', '+ 10 toneladas', 'F');
INSERT INTO TB_ACS_MODAL (ID_MODAL, TIPO_MODAL, CAPACIDADE_MODAL, CAPACIDADE_DE_INTERMODALIDADE)
    VALUES(4, 'Guincho Reboque Caminhões Pesados', '+ 10 toneladas', 'V');
INSERT INTO TB_ACS_MODAL (ID_MODAL, TIPO_MODAL, CAPACIDADE_MODAL, CAPACIDADE_DE_INTERMODALIDADE)
    VALUES(5, 'Guincho de Cabo', '+ 10 toneladas', 'V');


INSERT INTO TB_ACS_PRESTADOR (ID_PRESTADOR, NOME_PRESTADOR, TELEFONE_PRESTADOR, ULTIMA_LOCALIZAO_PRESTADOR) 
    VALUES (1, 'João da Silva', '(12)985852211', 'Rodovia Imigrantes, KM25');
INSERT INTO TB_ACS_PRESTADOR (ID_PRESTADOR, NOME_PRESTADOR, TELEFONE_PRESTADOR, ULTIMA_LOCALIZAO_PRESTADOR) 
    VALUES (2, 'Renata Pires', '(11)977441133', 'Rodovia Presidente Dutra');
INSERT INTO TB_ACS_PRESTADOR (ID_PRESTADOR, NOME_PRESTADOR, TELEFONE_PRESTADOR, ULTIMA_LOCALIZAO_PRESTADOR) 
    VALUES (3, 'Lucas Oliveira', '(31)985852211', 'Rodovia Fernão Dias');
INSERT INTO TB_ACS_PRESTADOR (ID_PRESTADOR, NOME_PRESTADOR, TELEFONE_PRESTADOR, ULTIMA_LOCALIZAO_PRESTADOR) 
    VALUES (4, 'Pedro Santos', '(21)985852211', 'Rodovia Rio-Santos');
INSERT INTO TB_ACS_PRESTADOR (ID_PRESTADOR, NOME_PRESTADOR, TELEFONE_PRESTADOR, ULTIMA_LOCALIZAO_PRESTADOR) 
    VALUES (5, 'Matheus Pereira', '(11)985852211', 'Rodovia Castelo Branco');
INSERT INTO TB_ACS_PRESTADOR (ID_PRESTADOR, NOME_PRESTADOR, TELEFONE_PRESTADOR, ULTIMA_LOCALIZAO_PRESTADOR) 
    VALUES (6, 'André Souza', '(31)985852211', 'Rodovia BR-040');
INSERT INTO TB_ACS_PRESTADOR (ID_PRESTADOR, NOME_PRESTADOR, TELEFONE_PRESTADOR, ULTIMA_LOCALIZAO_PRESTADOR) 
    VALUES (7, 'Rafael Costa', '(91)985852211', 'Rodovia Transamazônica');


INSERT INTO TB_ACS_USER (ID_USER, NOME_USER, TELEFONE_USER, CPF_USER, EMAIL_USER, ENDERECO_USER) VALUES (1, 'Ana Júlia', '(11)987452222', '11122233366', 'anajulia@gmail.com',
'Avenida Paulista, Bela Vista, São Paulo - SP');
INSERT INTO TB_ACS_USER (ID_USER, NOME_USER, TELEFONE_USER, CPF_USER, EMAIL_USER, ENDERECO_USER) VALUES (2, 'Antônio Ricardo Lopes', '(12)985441133', '99988877741', 'toninho@gmail.com',
'Rua XV de Novembro, Centro, Taubaté - SP');
INSERT INTO TB_ACS_USER (ID_USER, NOME_USER, TELEFONE_USER, CPF_USER, EMAIL_USER, ENDERECO_USER) VALUES (3, 'Cleiton Jesus Silva', '(82)999998787', '3322255599', 'cleitin@gmail.com',
'Rua Sá e Albuquerque, Farol, Maceió - AL');
INSERT INTO TB_ACS_USER (ID_USER, NOME_USER, TELEFONE_USER, CPF_USER, EMAIL_USER, ENDERECO_USER) VALUES (4, 'Ronaldo Peres Ferreira', '(27)988556622', '77744411122', 'dinhoperes@gmail.com',
'Rua João da Cruz, Praia do Canto, Vitória - ES');
INSERT INTO TB_ACS_USER (ID_USER, NOME_USER, TELEFONE_USER, CPF_USER, EMAIL_USER, ENDERECO_USER) VALUES (5, 'Roberta Souza Silva', '(31)966554411', '44400077755', 'roberta@gmail.com',
'Rua da Bahia, Centro, Belo Horizonte - MG');
INSERT INTO TB_ACS_USER (ID_USER, NOME_USER, TELEFONE_USER, CPF_USER, EMAIL_USER, ENDERECO_USER) VALUES (6, 'Eduardo Pinto Costa', '(41)921447788', '66633300099', 'educosta@gmail.com',
'Rua XV de Novembro, Centro, Curitiba - PR');
INSERT INTO TB_ACS_USER (ID_USER, NOME_USER, TELEFONE_USER, CPF_USER, EMAIL_USER, ENDERECO_USER) VALUES (7, 'Aparecido Gonçalves', '(11)969998974', '44455588899', 'cido@gmail.com',
'Rua Augusta, Consolação, São Paulo - SP');


INSERT INTO TB_ACS_VEICULO (ID_VEICULO, ANO_VEICULO, PESO_VEICULO, TIPO_COMBUSTIVEL, COR_VEICULO) VALUES (20, 2009, 29021.31, 'Diesel-S10', 'Amarelo');
INSERT INTO TB_ACS_VEICULO (ID_VEICULO, ANO_VEICULO, PESO_VEICULO, TIPO_COMBUSTIVEL, COR_VEICULO) VALUES (21, 2000, 40020.05, 'Diesel Comum', 'Branco');
INSERT INTO TB_ACS_VEICULO (ID_VEICULO, ANO_VEICULO, PESO_VEICULO, TIPO_COMBUSTIVEL, COR_VEICULO) VALUES (22, 2023, 54010.50, 'Diesel Comum', 'Vermelho');
INSERT INTO TB_ACS_VEICULO (ID_VEICULO, ANO_VEICULO, PESO_VEICULO, TIPO_COMBUSTIVEL, COR_VEICULO) VALUES (23, 2021, 10089.98, 'Etanol', 'Azul');
INSERT INTO TB_ACS_VEICULO (ID_VEICULO, ANO_VEICULO, PESO_VEICULO, TIPO_COMBUSTIVEL, COR_VEICULO) VALUES (24, 2010, 30012.20, 'Biodiesel', 'Branco');
INSERT INTO TB_ACS_VEICULO (ID_VEICULO, ANO_VEICULO, PESO_VEICULO, TIPO_COMBUSTIVEL, COR_VEICULO) VALUES (25, 2008, 58200.06, 'Etanol', 'Preto');
INSERT INTO TB_ACS_VEICULO (ID_VEICULO, ANO_VEICULO, PESO_VEICULO, TIPO_COMBUSTIVEL, COR_VEICULO) VALUES (26, 2009, 25300.30, 'Diesel-S10', 'Azul');


INSERT INTO TB_ACS_MODELOAPOLICE (ID_MODELOAPOLICE, TIPO_COBERTURA, PERIODO_VIGENCIA, EXCLUSOES_APOLICE) 
    VALUES(1, 'Cobertura de danos', '25-10-2020', 'Exclusão de atos criminosos');
INSERT INTO TB_ACS_MODELOAPOLICE (ID_MODELOAPOLICE, TIPO_COBERTURA, PERIODO_VIGENCIA, EXCLUSOES_APOLICE) 
    VALUES(2, 'Cobertura de responsabilidade civil', '08-01-2007', 'Exclusão de desgaste e deterioração normal');
INSERT INTO TB_ACS_MODELOAPOLICE (ID_MODELOAPOLICE, TIPO_COBERTURA, PERIODO_VIGENCIA, EXCLUSOES_APOLICE) 
    VALUES(3, 'Cobertura de vida', '15-05-2021', 'Exclusão de condições preexistentes');
INSERT INTO TB_ACS_MODELOAPOLICE (ID_MODELOAPOLICE, TIPO_COBERTURA, PERIODO_VIGENCIA, EXCLUSOES_APOLICE) 
    VALUES(4, 'Cobertura de saúde', '21-06-1995', 'Exclusão de atividades de alto risco');
INSERT INTO TB_ACS_MODELOAPOLICE (ID_MODELOAPOLICE, TIPO_COBERTURA, PERIODO_VIGENCIA, EXCLUSOES_APOLICE) 
    VALUES(5, 'Cobertura de propriedade ', '05-11-2006', 'Exclusão de inundação');
INSERT INTO TB_ACS_MODELOAPOLICE (ID_MODELOAPOLICE, TIPO_COBERTURA, PERIODO_VIGENCIA, EXCLUSOES_APOLICE) 
    VALUES(6, 'Cobertura de responsabilidade profissional', '22-03-2001', 'Exclusão de uso comercial');
INSERT INTO TB_ACS_MODELOAPOLICE (ID_MODELOAPOLICE, TIPO_COBERTURA, PERIODO_VIGENCIA, EXCLUSOES_APOLICE) 
    VALUES(7, 'Cobertura de invalidez', '06-11-2015', 'Exclusão de atos de guerra');


INSERT INTO TB_ACS_MODAL_PRESTADOR (ID_PRESTADOR, ID_MODAL, PLACA_MODAL_PRESTADOR) VALUES (7, 1, 'RST456');
INSERT INTO TB_ACS_MODAL_PRESTADOR (ID_PRESTADOR, ID_MODAL, PLACA_MODAL_PRESTADOR) VALUES (6, 2, 'MNO789');
INSERT INTO TB_ACS_MODAL_PRESTADOR (ID_PRESTADOR, ID_MODAL, PLACA_MODAL_PRESTADOR) VALUES (5, 3, 'GHI123');
INSERT INTO TB_ACS_MODAL_PRESTADOR (ID_PRESTADOR, ID_MODAL, PLACA_MODAL_PRESTADOR) VALUES (4, 4, 'UVX555');
INSERT INTO TB_ACS_MODAL_PRESTADOR (ID_PRESTADOR, ID_MODAL, PLACA_MODAL_PRESTADOR) VALUES (3, 5, 'YZA987');
INSERT INTO TB_ACS_MODAL_PRESTADOR (ID_PRESTADOR, ID_MODAL, PLACA_MODAL_PRESTADOR) VALUES (2, 1, 'QWE321');
INSERT INTO TB_ACS_MODAL_PRESTADOR (ID_PRESTADOR, ID_MODAL, PLACA_MODAL_PRESTADOR) VALUES (1, 2, 'JKL654');


INSERT INTO TB_ACS_MODELO (ID_MODELO, ID_VEICULO, ALTURA_MODELO, LARGURA_MODELO, COMPRIMENTO_MODELO, CATEGORIA_MODELO, MONTADORA_MODELO) 
    VALUES (10, 22, 3545.59, 2600.00, 5780.00, 'Caminhão Scania R400', 'Scania AB');
INSERT INTO TB_ACS_MODELO (ID_MODELO, ID_VEICULO, ALTURA_MODELO, LARGURA_MODELO, COMPRIMENTO_MODELO, CATEGORIA_MODELO, MONTADORA_MODELO) 
    VALUES (16, 24, 2774.00, 2486.00, 8793.00, 'Atego 3026 8x2 Plataforma', 'Mercedes Benz');
INSERT INTO TB_ACS_MODELO (ID_MODELO, ID_VEICULO, ALTURA_MODELO, LARGURA_MODELO, COMPRIMENTO_MODELO, CATEGORIA_MODELO, MONTADORA_MODELO) 
    VALUES (11, 20, 3710.00, 2520.00, 7200.00, 'Novo Actros 2651 6x4 LS Pneumática', 'Mercedes Benz');
INSERT INTO TB_ACS_MODELO (ID_MODELO, ID_VEICULO, ALTURA_MODELO, LARGURA_MODELO, COMPRIMENTO_MODELO, CATEGORIA_MODELO, MONTADORA_MODELO) 
    VALUES (15, 25, 3699.00, 2505.00, 8200.00, 'Caminhão Arocs 58 Ton 8x4 K', 'Mercedes Benz');
INSERT INTO TB_ACS_MODELO (ID_MODELO, ID_VEICULO, ALTURA_MODELO, LARGURA_MODELO, COMPRIMENTO_MODELO, CATEGORIA_MODELO, MONTADORA_MODELO) 
    VALUES (12, 26, 3900.00, 2500.00, 6880.00, 'Scania R 500', 'Scania');
INSERT INTO TB_ACS_MODELO (ID_MODELO, ID_VEICULO, ALTURA_MODELO, LARGURA_MODELO, COMPRIMENTO_MODELO, CATEGORIA_MODELO, MONTADORA_MODELO) 
    VALUES (14, 21, 3800.00, 2600.00, 5780.00, 'Caminhão Volvo FH16', 'Volvo');
INSERT INTO TB_ACS_MODELO (ID_MODELO, ID_VEICULO, ALTURA_MODELO, LARGURA_MODELO, COMPRIMENTO_MODELO, CATEGORIA_MODELO, MONTADORA_MODELO) 
    VALUES (13, 23, 3500.00, 2500.00, 8000.00, 'Mercedes-Benz Arocs 3345K', 'Mercedes Benz');


INSERT INTO TB_ACS_APOLICE (ID_APOLICE, ID_MODELOAPOLICE, ID_USER, NUMERO_APOLICE) VALUES (1, 5, 3, 'SSSSSAAAAFFFFRRRRNNNNNNNEEEEEE');
INSERT INTO TB_ACS_APOLICE (ID_APOLICE, ID_MODELOAPOLICE, ID_USER, NUMERO_APOLICE) VALUES (2, 4, 1, 'AASAAANFNSFFRNFENRRNNSSEENAAAA');
INSERT INTO TB_ACS_APOLICE (ID_APOLICE, ID_MODELOAPOLICE, ID_USER, NUMERO_APOLICE) VALUES (3, 3, 5, 'FFNEEERSRANNSNNNAAAAFRFSAFFSSS');
INSERT INTO TB_ACS_APOLICE (ID_APOLICE, ID_MODELOAPOLICE, ID_USER, NUMERO_APOLICE) VALUES (4, 2, 6, 'NNNNNEEEERFAASASRRRSFSSFAAANF');
INSERT INTO TB_ACS_APOLICE (ID_APOLICE, ID_MODELOAPOLICE, ID_USER, NUMERO_APOLICE) VALUES (5, 1, 7, 'SSSFFNAAERNENNNRRRFEESAAASNFFF');
INSERT INTO TB_ACS_APOLICE (ID_APOLICE, ID_MODELOAPOLICE, ID_USER, NUMERO_APOLICE) VALUES (6, 6, 4, 'AARRSFFNNEEEENNNASAAASRRFSFFFF');
INSERT INTO TB_ACS_APOLICE (ID_APOLICE, ID_MODELOAPOLICE, ID_USER, NUMERO_APOLICE) VALUES (7, 7, 2, 'FRAAAAAFSSSSNERNNRFFNAENEEFFS');


INSERT INTO TB_ACS_VEICULO_APOLICE (ID_VEICULO, ID_APOLICE, PLACA_VEICULO, CONDICAO_VEICULO) VALUES (26, 1, 'ABC123', 'Manutenção regular');
INSERT INTO TB_ACS_VEICULO_APOLICE (ID_VEICULO, ID_APOLICE, PLACA_VEICULO, CONDICAO_VEICULO) VALUES (25, 2, 'XYZ789', 'Limites de cobertura');
INSERT INTO TB_ACS_VEICULO_APOLICE (ID_VEICULO, ID_APOLICE, PLACA_VEICULO, CONDICAO_VEICULO) VALUES (24, 3, 'FGH456', 'Prevenção de roubo');
INSERT INTO TB_ACS_VEICULO_APOLICE (ID_VEICULO, ID_APOLICE, PLACA_VEICULO, CONDICAO_VEICULO) VALUES (23, 4, 'LMN001', 'Manutenção regular');
INSERT INTO TB_ACS_VEICULO_APOLICE (ID_VEICULO, ID_APOLICE, PLACA_VEICULO, CONDICAO_VEICULO) VALUES (22, 5, 'QRS987', 'Exclusões específicas');
INSERT INTO TB_ACS_VEICULO_APOLICE (ID_VEICULO, ID_APOLICE, PLACA_VEICULO, CONDICAO_VEICULO) VALUES (21, 6, 'PQR555', 'Limites de cobertura');
INSERT INTO TB_ACS_VEICULO_APOLICE (ID_VEICULO, ID_APOLICE, PLACA_VEICULO, CONDICAO_VEICULO) VALUES (20, 7, 'UVW333', 'Manutenção regular');


INSERT INTO TB_ACS_ORDEMSERVICO (ID_ORDEMSERVICO, ID_APOLICE, ID_PRESTADOR, ID_USER, DESCRICAO_ORDEMSERVICO, 
    DATAABERTURA_ORDEMSERVICO, DATAFECHAMENTO_ORDEMSERVICO, STATUS_ORDEMSERVICO, LOCALIZACAO_ORDEMSERVICO) 
        VALUES (1, 7, 1, 7, 'Reparo de colisão frontal e Serviço de manutenção preventiva', '20-03-2022', '20-04-2022', 
            'Concluída', 'Anápolis - GO');
INSERT INTO TB_ACS_ORDEMSERVICO (ID_ORDEMSERVICO, ID_APOLICE, ID_PRESTADOR, ID_USER, DESCRICAO_ORDEMSERVICO, 
    DATAABERTURA_ORDEMSERVICO, DATAFECHAMENTO_ORDEMSERVICO, STATUS_ORDEMSERVICO, LOCALIZACAO_ORDEMSERVICO) 
        VALUES (2, 6, 5, 6, 'Reparo de danos causados por granizo e Serviço de manutenção preventiva', '15-05-2023', '30-10-2023', 
            'Concluída', 'São Paulo - SP');
INSERT INTO TB_ACS_ORDEMSERVICO (ID_ORDEMSERVICO, ID_APOLICE, ID_PRESTADOR, ID_USER, DESCRICAO_ORDEMSERVICO, 
    DATAABERTURA_ORDEMSERVICO, DATAFECHAMENTO_ORDEMSERVICO, STATUS_ORDEMSERVICO, LOCALIZACAO_ORDEMSERVICO) 
        VALUES (3, 5, 7, 5, 'Reparo de colisão frontal e Reparo de pneu furado', '20-12-2022', '20-03-2023', 
            'Concluída', 'Rio de Janeiro - RJ');
INSERT INTO TB_ACS_ORDEMSERVICO (ID_ORDEMSERVICO, ID_APOLICE, ID_PRESTADOR, ID_USER, DESCRICAO_ORDEMSERVICO, 
    DATAABERTURA_ORDEMSERVICO, DATAFECHAMENTO_ORDEMSERVICO, STATUS_ORDEMSERVICO, LOCALIZACAO_ORDEMSERVICO) 
        VALUES (4, 3, 6, 4, 'Reparo de sistemas de transmissão, Reparo de pneu furado e Reparo de colisão frontal', '05-02-2023', '12-07-2023', 
            'Concluída', 'Curitiba - PR');
INSERT INTO TB_ACS_ORDEMSERVICO (ID_ORDEMSERVICO, ID_APOLICE, ID_PRESTADOR, ID_USER, DESCRICAO_ORDEMSERVICO, 
    DATAABERTURA_ORDEMSERVICO, DATAFECHAMENTO_ORDEMSERVICO, STATUS_ORDEMSERVICO, LOCALIZACAO_ORDEMSERVICO) 
        VALUES (5, 4, 2, 3, 'Reparo de colisão frontal, Reparo de pneu furado e Serviço de manutenção preventiva', '20-06-2023', '28-09-2023', 
            'Concluída', 'Recife - PE');
INSERT INTO TB_ACS_ORDEMSERVICO (ID_ORDEMSERVICO, ID_APOLICE, ID_PRESTADOR, ID_USER, DESCRICAO_ORDEMSERVICO, 
    DATAABERTURA_ORDEMSERVICO, DATAFECHAMENTO_ORDEMSERVICO, STATUS_ORDEMSERVICO, LOCALIZACAO_ORDEMSERVICO) 
        VALUES (6, 2, 3, 2, 'Reparo de colisão frontal e Reparo de painel lateral amassado', '08-07-2022', '10-09-2022', 
            'Concluída', 'Salvador - BA');
INSERT INTO TB_ACS_ORDEMSERVICO (ID_ORDEMSERVICO, ID_APOLICE, ID_PRESTADOR, ID_USER, DESCRICAO_ORDEMSERVICO, 
    DATAABERTURA_ORDEMSERVICO, DATAFECHAMENTO_ORDEMSERVICO, STATUS_ORDEMSERVICO, LOCALIZACAO_ORDEMSERVICO) 
        VALUES (7, 1, 4, 1, 'Reparo de colisão frontal', '20-03-2023', '20-04-2023', 
            'Concluída', 'Porto Alegre - RS');


--Deletando primeiramente a FK:
DELETE FROM TB_ACS_VEICULO_APOLICE
WHERE ID_APOLICE = 1;

--Deletando depois outra FK:
DELETE FROM TB_ACS_ORDEMSERVICO
WHERE ID_APOLICE = 1;

--Deletando outra FK:
DELETE FROM TB_ACS_APOLICE
WHERE ID_APOLICE = 1;

--Finalmente deletando o objetivo principal: um tipo de apolice que não está mais incluída na Porto:
DELETE FROM TB_ACS_MODELOAPOLICE
WHERE ID_MODELOAPOLICE = 5;


--Update para atualizar dados da tabela;
UPDATE TB_ACS_USER
SET TELEFONE_USER = '(41)996225500'
WHERE ID_USER = 6;

--Update para atualizar dados da tabela;
UPDATE TB_ACS_MODAL_PRESTADOR
SET PLACA_MODAL_PRESTADOR = 'NOO521'
WHERE ID_MODAL = 2;

--Update para atualizar dados da tabela;
UPDATE TB_ACS_ORDEMSERVICO
SET STATUS_ORDEMSERVICO = 'Concluída'
WHERE ID_ORDEMSERVICO = 1;

--Função de ordenação em ordem crescente, baseada no ID dos usuários da tabela de ORDEMSERVICO;
SELECT *
FROM TB_ACS_ORDEMSERVICO
ORDER BY ID_USER ASC;

--Função para calcular a média de comprimento dos veículos cadastrados no sistema;
SELECT ROUND(AVG(COMPRIMENTO_MODELO), 3) AS MEDIA_COMPRIMENTO_VEICULOS
FROM TB_ACS_MODELO;


--Função para agrupar todos os prestadores que possuem uma ordem de serviço concluída (no caso, todos os cadastrados a possuem);
SELECT ID_PRESTADOR, COUNT(CASE WHEN STATUS_ORDEMSERVICO = 'Concluída' THEN 1 ELSE NULL END) AS SERVICO_CONCLUIDO
FROM TB_ACS_ORDEMSERVICO
GROUP BY ID_PRESTADOR;


--Subconsulta para verificar todos os usuários que estão com a ordem de serviço concluída;
SELECT ID_USER
FROM TB_ACS_ORDEMSERVICO
WHERE ID_USER IN (
  SELECT ID_USER
  FROM TB_ACS_ORDEMSERVICO
  WHERE STATUS_ORDEMSERVICO = 'Concluída'
);


--Junção para verificar o tipo de cobertura das apólices dos clientes cadastrados;
SELECT *
FROM TB_ACS_MODELOAPOLICE
FULL JOIN (TB_ACS_APOLICE FULL JOIN TB_ACS_USER
ON TB_ACS_APOLICE.ID_USER = TB_ACS_USER.ID_USER)
ON TB_ACS_MODELOAPOLICE.ID_MODELOAPOLICE = TB_ACS_APOLICE.ID_MODELOAPOLICE;

